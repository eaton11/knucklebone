"use strict";var knucklebone=function(){function n(n,e,r,o){var u=s(new XMLHttpRequest);return u.addEventListener("readystatechange",function(n){4===u.readyState&&t(u,r,e)}),u.open(e,n),"GET"===e?u.send():"POST"===e&&("json"===r?(u.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o instanceof Object?u.send(JSON.stringify(o)):u.send(o)):u.send(o)),u}function t(n,t,s){if(n.status>=200&&n.status<400){if("POST"===s)return e(n,n.response);if("json"!==t)return e(n,n.response);var u=o(n.response);return null===u?r(n,"Error parsing response. Expected JSON."):e(n,u)}return r(n,n.response)}function e(n,t){"function"==typeof n._onSuccess&&n._onSuccess(t)}function r(n,t){"function"==typeof n._onError&&n._onError(t)}function o(n){try{var t=JSON.parse(n)}catch(e){return null}return t}function s(n){return n.success=function(t){if("function"!=typeof t)throw Error('callback not passed to "success" method');return n._onSuccess=t,this},n.error=function(t){if("function"!=typeof t)throw Error('callback not passed to "error" method');return n._onError=t,this},n}function u(t){return n(t,"GET")}function c(t){return n(t,"GET","json")}function i(t,e){return n(t,"POST",void 0,e)}function f(t,e){return n(t,"POST","json",e)}function a(n){for(var t=document.getElementById(n).querySelectorAll("[kb]"),e={},r=0,o=t.length;o>r;r++){if(t[r].hasAttribute("name")){var s=t[r].getAttribute("name").trim();if(e[s])throw Error("form name dublicated");e[s]=t[r].value.trim()}t[r]}return e}return{get:u,getJson:c,post:i,postJson:f,formToObject:a}}();
